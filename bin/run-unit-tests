#!/usr/bin/env bash
vader_path="$PWD/../vader.vim"
vader_repo="https://github.com/junegunn/vader.vim.git"

if ! test -d "$vader_path"; then
  git clone --depth=1 "$vader_repo" "$vader_path"
fi

vimrc="
filetype off
set rtp+=$vader_path
set rtp+=.
set rtp+=after
filetype plugin indent on
syntax enable
"

function get_vim_executable {
  if command -v nvim > /dev/null; then
    echo nvim
  else
    echo vim
  fi
}

"$(get_vim_executable)" -Nu <(echo "$vimrc") -c 'Vader! **/*.vader'
